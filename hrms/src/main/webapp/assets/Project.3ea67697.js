import{r as P}from"./request.5f96fccc.js";import{b as h}from"./bus.40155642.js";import{u as k}from"./limit.231b0a95.js";import{_ as S,d as g,e as $,r as i,o as I,c as C,a as t,w as o,b as v,i as x,F as T,m as u,n as F,I as R,T as U,p as E,l as j,h as q,H as K,J as A}from"./index.bbbda2ab.js";import{c as N}from"./salary.ec121f13.js";const V=s=>P({url:"/payroll/selectAll",method:"post",data:{name:s}}),M=s=>P({url:"/payroll/deleteById",method:"post",data:s,headers:{"Content-Type":"application/json;charset=utf-8"}}),L=s=>P({url:"/payroll/deleteByIds",method:"post",data:s,headers:{"Content-Type":"application/json;charset=utf-8"}}),O=s=>P({url:"/payroll/insert",method:"post",data:s}),W=s=>P({url:"/payroll/updateById",method:"post",data:s});const H={class:"sel"},J={__name:"AddPro",setup(s){const{limit:f}=k(),_=g(null),a=$({name:"2024-11\u85AA\u8D44",startDate:"",expirationDate:""}),n=g(!1),b=()=>{f.includes("payroll:select")?f.includes("payroll:insert")?(_.value!=null&&_.value.resetFields(),n.value=!0):u.error("\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650!"):u.error("\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u83B7\u53D6\u67E5\u770B\u6743\u9650\u518D\u8FDB\u884C\u6B64\u64CD\u4F5C!")},m=()=>{n.value=!1},p=l=>{let e=new Date(l.startDate).getTime(),d=new Date(l.expirationDate).getTime();e>d?u.warning("\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u5927\u4E8E\u622A\u6B62\u65F6\u95F4"):(h.emit("getPro",l),n.value=!1)};return(l,e)=>{const d=i("a-button"),c=i("a-input"),y=i("a-form-item"),w=i("a-form"),D=i("a-modal");return I(),C(T,null,[t(d,{type:"primary",style:{"margin-bottom":"20px"},onClick:b},{default:o(()=>[v("\u65B0\u589E\u85AA\u8D44\u9879\u76EE")]),_:1}),t(D,{visible:n.value,"onUpdate:visible":e[3]||(e[3]=r=>n.value=r),title:"\u65B0\u589E\u85AA\u8D44\u9879\u76EE",footer:null,closable:!1},{default:o(()=>[t(w,{model:a,ref_key:"resetf",ref:_,"label-col":{span:8},"wrapper-col":{span:12},onFinish:p,autocomplete:"off"},{default:o(()=>[t(y,{label:"\u85AA\u8D44\u9879\u76EE",name:"name",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{value:a.name,"onUpdate:value":e[0]||(e[0]=r=>a.name=r),placeholder:"\u8BF7\u8F93\u5165\u85AA\u8D44\u9879\u76EE"},null,8,["value"])]),_:1}),t(y,{label:"\u5F00\u59CB\u65F6\u95F4",name:"startDate",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{type:"date",value:a.startDate,"onUpdate:value":e[1]||(e[1]=r=>a.startDate=r)},null,8,["value"])]),_:1}),t(y,{label:"\u622A\u6B62\u65F6\u95F4",name:"expirationDate",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{type:"date",value:a.expirationDate,"onUpdate:value":e[2]||(e[2]=r=>a.expirationDate=r)},null,8,["value"])]),_:1}),x("div",H,[t(d,{type:"primary",onClick:m},{default:o(()=>[v("\u53D6\u6D88")]),_:1}),t(d,{type:"primary",htmlType:"submit"},{default:o(()=>[v("\u786E\u8BA4")]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},z=S(J,[["__scopeId","data-v-d3ef3ba9"]]);const G={class:"sel"},Q={__name:"EditPro",props:{record:Object},setup(s){const{limit:f}=k(),_=g(null),a=$({name:"1",startDate:"1",expirationDate:"1",id:1}),n=g(!1),b=l=>{f.includes("payroll:edit")?(_.value!=null&&_.value.resetFields(),a.name=l.name,a.startDate=l.startDate,a.expirationDate=l.expirationDate,a.id=l.id,n.value=!0):u.error("\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650!")},m=()=>{n.value=!1},p=l=>{let e=new Date(l.startDate).getTime(),d=new Date(l.expirationDate).getTime();e>d?u.warning("\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u5927\u4E8E\u622A\u6B62\u65F6\u95F4"):(l.id=a.id,h.emit("EditPro",l),n.value=!1)};return(l,e)=>{const d=i("a-button"),c=i("a-input"),y=i("a-form-item"),w=i("a-form"),D=i("a-modal");return I(),C(T,null,[t(d,{type:"ghost",onClick:e[0]||(e[0]=r=>b(s.record))},{default:o(()=>[v("\u7F16\u8F91")]),_:1}),t(D,{visible:n.value,"onUpdate:visible":e[4]||(e[4]=r=>n.value=r),title:"\u7F16\u8F91\u85AA\u8D44\u9879\u76EE",footer:null,closable:!1},{default:o(()=>[t(w,{model:a,ref_key:"resetf",ref:_,"label-col":{span:8},"wrapper-col":{span:12},onFinish:p,autocomplete:"off"},{default:o(()=>[t(y,{label:"\u85AA\u8D44\u9879\u76EE",name:"name",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{value:a.name,"onUpdate:value":e[1]||(e[1]=r=>a.name=r),placeholder:"\u8BF7\u8F93\u5165\u85AA\u8D44\u9879\u76EE"},null,8,["value"])]),_:1}),t(y,{label:"\u5F00\u59CB\u65F6\u95F4",name:"startDate",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{type:"date",value:a.startDate,"onUpdate:value":e[2]||(e[2]=r=>a.startDate=r)},null,8,["value"])]),_:1}),t(y,{label:"\u622A\u6B62\u65F6\u95F4",name:"expirationDate",rules:[{required:!0,message:"\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A!"}]},{default:o(()=>[t(c,{type:"date",value:a.expirationDate,"onUpdate:value":e[3]||(e[3]=r=>a.expirationDate=r)},null,8,["value"])]),_:1}),x("div",G,[t(d,{type:"primary",onClick:m},{default:o(()=>[v("\u53D6\u6D88")]),_:1}),t(d,{type:"primary",htmlType:"submit"},{default:o(()=>[v("\u786E\u8BA4")]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},X=S(Q,[["__scopeId","data-v-1eac794f"]]);const Y=s=>(E("data-v-28f8015c"),s=s(),j(),s),Z={key:0,class:"mask"},ee={class:"dialog"},te={class:"btn"},ae=Y(()=>x("h3",null,"\u85AA\u8D44\u62A5\u8868:",-1)),le={__name:"ReadSal",props:{record:Object},setup(s){const{limit:f}=k(),_=[{title:"\u5458\u5DE5",dataIndex:"name"},{title:"\u85AA\u8D44\u9879\u76EE",dataIndex:"payroll"},{title:"\u57FA\u7840\u5DE5\u8D44",dataIndex:"basicWage"},{title:"\u52A0\u73ED\u5956\u91D1",dataIndex:"overtimePremium"},{title:"\u5176\u4ED6\u5956\u91D1",dataIndex:"otherBonuses"},{title:"\u5176\u4ED6\u6D25\u8D34",dataIndex:"otherSubsidies"},{title:"\u5176\u4ED6\u52A0\u6B3E",dataIndex:"otherAdditions"},{title:"\u672A\u51FA\u52E4\u6263\u6B3E",dataIndex:"absenteeismDeductions"},{title:"\u75C5\u5047\u6263\u6B3E",dataIndex:"sickLeaveDeductions"},{title:"\u5176\u4ED6\u6263\u6B3E",dataIndex:"otherDeductions"},{title:"\u517B\u8001\u4FDD\u9669",dataIndex:"endowmentInsurance"},{title:"\u533B\u7597\u4FDD\u9669",dataIndex:"medicalInsurance"},{title:"\u5931\u4E1A\u4FDD\u9669",dataIndex:"unemploymentInsurance"},{title:"\u516C\u79EF\u91D1",dataIndex:"accumulationFund"},{title:"\u4E2A\u4EBA\u6240\u5F97\u7A0E",dataIndex:"individualIncomeTax"},{title:"\u672C\u6708\u5B9E\u53D1",dataIndex:"monthlyWage"}],a=g([]),n=g(!1),b=async m=>{if(f.includes("payroll:selectByPayrollId")){n.value=!0;let p=await N(m.id);a.value=p.list,a.value.forEach(l=>{l.name=l.employee.name,l.payroll=l.payroll.name})}else u.error("\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650!")};return(m,p)=>{const l=i("a-button"),e=i("a-table");return I(),C(T,null,[t(l,{type:"ghost",onClick:p[0]||(p[0]=d=>b(s.record))},{default:o(()=>[v("\u67E5\u770B\u85AA\u8D44\u62A5\u8868")]),_:1}),(I(),F(U,{to:"body"},[n.value?(I(),C("div",Z,[x("div",ee,[x("div",te,[ae,x("div",{onClick:p[1]||(p[1]=d=>n.value=!1)},"\u5173\u95ED\u5F39\u7A97")]),x("div",null,[t(e,{dataSource:a.value,columns:_,pagination:!1},null,8,["dataSource"])])])])):R("",!0)]))],64)}}},oe=S(le,[["__scopeId","data-v-28f8015c"]]);const ne={class:"search"},se={__name:"Project",setup(s){const{limit:f}=k(),_=[{title:"\u85AA\u8D44\u9879\u76EE",dataIndex:"name"},{title:"\u5F00\u59CB\u65E5\u671F",dataIndex:"startDate"},{title:"\u622A\u6B62\u65E5\u671F",dataIndex:"expirationDate"},{title:"\u64CD\u4F5C",dataIndex:"operate"}],a=g([]),n=async e=>{let d=await V(e);a.value=d.list,a.value.forEach(c=>{c.key=c.id})};q(()=>{n()}),h.on("getPro",async e=>{await O(e),n(),u.success("\u65B0\u589E\u6210\u529F")}),h.on("EditPro",async e=>{await W(e),n(),u.success("\u4FEE\u6539\u6210\u529F")});const b=async e=>{f.includes("payroll:delete")?(await M(e),n(),u.success("\u5220\u9664\u6210\u529F")):u.error("\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650!")},m=$({selectedRowKeys:[]}),p=e=>{m.selectedRowKeys=e},l=async()=>{f.includes("payroll:select")?f.includes("payroll:delete")?m.selectedRowKeys.length?(await L(m.selectedRowKeys),n(),u.success("\u5220\u9664\u6210\u529F")):u.warning("\u5220\u9664\u7684\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"):u.error("\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650!"):u.error("\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u83B7\u53D6\u67E5\u770B\u6743\u9650\u518D\u8FDB\u884C\u6B64\u64CD\u4F5C!")};return K(()=>{h.all.clear()}),(e,d)=>{const c=i("a-button"),y=i("a-popconfirm"),w=i("a-space"),D=i("a-table");return I(),C(T,null,[x("div",ne,[t(z),t(y,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onConfirm:l},{default:o(()=>[t(c,{type:"danger"},{default:o(()=>[v("\u6279\u91CF\u5220\u9664")]),_:1})]),_:1})]),t(D,{dataSource:a.value,columns:_,"row-selection":{selectedRowKeys:m.selectedRowKeys,onChange:p}},{bodyCell:o(({column:r,record:B})=>[r.dataIndex==="operate"?(I(),F(w,{key:0},{default:o(()=>[t(oe,{record:B},null,8,["record"]),t(X,{record:B},null,8,["record"]),t(y,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?","ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onConfirm:re=>b(B.id)},{default:o(()=>[t(c,{class:"new",type:"ghost"},{default:o(()=>[v("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):R("",!0)]),default:o(()=>[A(e.$slots,"bodyCell",{},void 0,!0)]),_:3},8,["dataSource","row-selection"])],64)}}},_e=S(se,[["__scopeId","data-v-efe783a6"]]);export{_e as default};
